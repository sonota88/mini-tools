<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>電卓</title>
    <style>
      body { background: #eee; }
      input { font-size: 120%; font-family: monospace; }
    </style>
    <script type="text/javascript"
            src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
  </head>
  <body>

    <input type="text" id="input" value="" style="width: 90%;" />
    <br />
    <br />
    <input type="text" id="result" value="" style="width: 90%;" />

    <script type="text/javascript">
function calcMain(){
  var input = $("#input").val();
  var $result = $("#result");
  try{
    var result = eval(input);
    $result.val(result);
    $result.css("background", "#fff");
  }catch(e){
    $result.css("background", "#ff0");
  }
}

var t = null;

function onkeydownFunc(ev){
  if(t){
  clearTimeout(t);
  }
  t = setTimeout(calcMain, 100);
}

$(function(){
  $("#input").on("keydown", onkeydownFunc);
  $("#input").focus();
});
    </script>

  </body>
</html>
